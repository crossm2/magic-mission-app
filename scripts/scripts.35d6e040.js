"use strict";function statusChangeCallback(a){console.log("statusChangeCallback"),console.log(a),"connected"===a.status?testAPI():"not_authorized"===a.status?document.getElementById("status").innerHTML="Please log into this app.":document.getElementById("status").innerHTML="Please log into Facebook."}function checkLoginState(){FB.getLoginStatus(function(a){statusChangeCallback(a)})}function testAPI(){console.log("Welcome!  Fetching your information.... "),FB.api("/me",function(a){console.log("Successful login for: "+a.name),document.getElementById("status").innerHTML="Thanks for logging in, "+a.name+"!"})}var myApp=angular.module("magicMissionAppApp",["ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","firebase","firebase.ref","firebase.auth"]).constant("FIREBASE_URL","https://magic-muscle-mission.firebaseio.com/");window.fbAsyncInit=function(){FB.init({appId:"1149221148476641",cookie:!0,xfbml:!0,version:"v2.5"}),FB.getLoginStatus(function(a){statusChangeCallback(a)})},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk"),myApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/register",{templateUrl:"views/register.html",controller:"RegistrationController"}).when("/main",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main",resolve:{currentAuth:["Authentication",function(a){return a.requireAuth()}]}}).when("/chat",{templateUrl:"views/chat.html",controller:"chatCtrl",controllerAs:"chat"}).when("/account",{templateUrl:"views/account.html",controller:"accountCtrl",controllerAs:"account"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/browse",{templateUrl:"views/browse.html",controller:"BrowseCtrl",controllerAs:"browse"}).otherwise({redirectTo:"/"})}]),angular.module("magicMissionAppApp").controller("MainCtrl",["$scope","$firebaseArray","$firebaseObject",function(a,b,c){var d=new Firebase("https://magic-muscle-mission.firebaseio.com");a.data=c(d),console.log(a.data);var e=[],f=[],g=[],h=[],i=[],j=[],k=[];d.on("child_added",function(a,b){var c=a.val();for(var d in c)e.push(c[d]);for(var l in e)"Core"===e[l].Section?f.push(e[l]):"Upper"===e[l].Section?g.push(e[l]):"Lower"===e[l].Section?h.push(e[l]):"Whole Body"===e[l].Section?i.push(e[l]):"Recovery"===e[l].Section&&j.push(e[l]);for(var m=0;2>m;m++){var n=Math.floor(Math.random()*f.length),o=Math.floor(Math.random()*h.length),p=Math.floor(Math.random()*g.length),q=Math.floor(Math.random()*i.length),r=Math.floor(Math.random()*j.length),s=f[n],t=h[o],u=g[p],v=i[q],w=j[r];k.push(s),k.push(t),k.push(u),k.push(v),k.push(w),f.splice(n,1),h.splice(o,1),g.splice(p,1),i.splice(q,1),j.splice(r,1)}}),a.workoutTest=k,a.showCircuit1=!0,a.showCircuit2=!1,a.circuit2Underline={"background-color":"transparent"},a.circuit1=function(){a.showCircuit1=!0,a.showCircuit2=!1,console.log("cir1 function run"),a.circuit2Underline={"background-color":"transparent"},a.circuit1Underline={"background-color":"$indigo"}},a.circuit2=function(){a.showCircuit1=!1,a.showCircuit2=!0,a.circuit2Underline={"background-color":"$indigo"},a.circuit1Underline={"background-color":"transparent"}},a.showDemo=!1,a.next_Exercise=function(){console.log("clicked icon")},a.seeDemo=function(){console.log("clicked workout"),a.showDemo=!a.showDemo}}]),angular.module("firebase.config",[]).constant("FBURL","https://magic-muscle-mission.firebaseio.com").constant("SIMPLE_LOGIN_PROVIDERS",["password","anonymous","facebook","google","twitter"]).constant("loginRedirectPath","/login"),angular.module("firebase.ref",["firebase","firebase.config"]).factory("Ref",["$window","FBURL",function(a,b){return new a.Firebase(b)}]),angular.module("magicMissionAppApp").controller("ChatCtrl",["$scope","Ref","$firebaseArray","$timeout",function(a,b,c,d){function e(b){a.err=b,d(function(){a.err=null},5e3)}a.messages=c(b.child("messages").limitToLast(10)),a.messages.$loaded()["catch"](e),a.addMessage=function(b){b&&a.messages.$add({text:b})["catch"](e)}}]),angular.module("magicMissionAppApp").filter("reverse",function(){return function(a){return angular.isArray(a)?a.slice().reverse():[]}}),function(){angular.module("firebase.auth",["firebase","firebase.ref"]).factory("Auth",["$firebaseAuth","Ref",function(a,b){return a(b)}])}();var app=angular.module("magicMissionAppApp");app.factory("Auth",["$firebaseAuth",function(a){var b=new Firebase("https://magic-muscle-mission.firebaseio.com");return a(b)}]),app.controller("LoginCtrl",["$scope","Auth","$location","$q","Ref","$timeout",function(a,b,c,d,e,f){function g(a){return h(a.substr(0,a.indexOf("@"))||"")}function h(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)}function i(){c.path("/account")}function j(b){a.err=b}FB.XFBML.parse(),a.oauthLogin=function(c){a.err=null,b.$authWithOAuthPopup(c,{rememberMe:!0}).then(i,j)},a.anonymousLogin=function(){a.err=null,b.$authAnonymously({rememberMe:!0}).then(i,j)},a.testPassword=function(){var a=new Firebase("https://magic-muscle-mission.firebaseio.com");a.authWithPassword({email:"bobtony@firebase.com",password:"correcthorsebatterystaple"},function(a,b){a?console.log("Login Failed!",a):console.log("Authenticated successfully with payload:",b)})},a.passwordLogin=function(c,d){a.err=null,b.$authWithPassword({email:c,password:d},{rememberMe:!0}).then(i,j)},a.createAccount=function(c,h,k){function l(a){var b=e.child("users",a.uid),h=d.defer();return b.set({email:c,name:g(c)},function(a){f(function(){a?h.reject(a):h.resolve(b)})}),h.promise}a.err=null,h?h!==k?a.err="Passwords do not match":(console.log("this passed"),console.log(c),console.log(h),b.$createUser({email:c,password:h}).then(function(){return b.$authWithPassword({email:c,password:h},{rememberMe:!0})}).then(l).then(i,j)):a.err="Please enter a password"}}]),angular.module("magicMissionAppApp").controller("AccountCtrl",["$scope","user","Auth","Ref","$firebaseObject","$timeout",function(a,b,c,d,e,f){function g(a){i(a,"danger")}function h(a){i(a,"success")}function i(b,c){var d={text:b+"",type:c};a.messages.unshift(d),f(function(){a.messages.splice(a.messages.indexOf(d),1)},1e4)}a.user=b,a.logout=function(){c.$unauth()},a.messages=[];var j=e(d.child("users/"+b.uid));j.$bindTo(a,"profile"),a.changePassword=function(b,d,e){a.err=null,b&&d?d!==e?g("Passwords do not match"):c.$changePassword({email:j.email,oldPassword:b,newPassword:d}).then(function(){h("Password changed")},g):g("Please enter all fields")},a.changeEmail=function(b,d){a.err=null,c.$changeEmail({password:b,newEmail:d,oldEmail:j.email}).then(function(){j.email=d,j.$save(),h("Email changed")})["catch"](g)}}]),angular.module("magicMissionAppApp").directive("ngShowAuth",["Auth","$timeout",function(a,b){return{restrict:"A",link:function(c,d){function e(){b(function(){d.toggleClass("ng-cloak",!a.$getAuth())},0)}d.addClass("ng-cloak"),a.$onAuth(e),e()}}}]),angular.module("magicMissionAppApp").directive("ngHideAuth",["Auth","$timeout",function(a,b){return{restrict:"A",link:function(c,d){function e(){b(function(){d.toggleClass("ng-cloak",!!a.$getAuth())},0)}d.addClass("ng-cloak"),a.$onAuth(e),e()}}}]),angular.module("magicMissionAppApp").config(["$routeProvider","SECURED_ROUTES",function(a,b){a.whenAuthenticated=function(c,d){return d.resolve=d.resolve||{},d.resolve.user=["Auth",function(a){return a.$requireAuth()}],a.when(c,d),b[c]=!0,a}}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/chat",{templateUrl:"views/chat.html",controller:"ChatCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).whenAuthenticated("/account",{templateUrl:"views/account.html",controller:"AccountCtrl"}).when("/myroute",{templateUrl:"views/myroute.html",controller:"MyrouteCtrl"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location","Auth","SECURED_ROUTES","loginRedirectPath",function(a,b,c,d,e){function f(a){!a&&g(b.path())&&b.path(e)}function g(a){return d.hasOwnProperty(a)}c.$onAuth(f),a.$on("$routeChangeError",function(a,c,d,f){"AUTH_REQUIRED"===f&&b.path(e)})}]).constant("SECURED_ROUTES",{}),angular.module("magicMissionAppApp").controller("MyrouteCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("magicMissionAppApp").controller("UserCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("magicMissionAppApp").service("myservice",function(){}),angular.module("magicMissionAppApp").controller("BrowseCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("magicMissionAppApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]});